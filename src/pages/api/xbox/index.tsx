import axios from "axios";
import { GetServerSideProps } from "next";
import { api } from "../../../services/api";


export default async function handler(req, res) {

    const response = await axios.get('https://redeem.microsoft.com/webblendredeem?lang=pt-BR&market=US&control=redeem&mock=false&metadata=mscomct&lang=pt-BR&cid=a78287f79f56ddc1&xhr=true&X-Requested-With=XMLHttpRequest&_=1619829755302', {
        headers: {
            Cookie: "MC1=GUID=f0731a20bd1c4a7ab7e37478560cf1d5&HASH=f073&LV=202104&V=4&LU=1617311531814; MUID=0A9FF8FF7FEC657E086AE8FA7E5A64CC; RPSShare=1; me-ct=1; ANON=A=CAAF345D8AE8E86C46311BFBFFFFFFFF&E=196c&W=2; NAP=V=1.9&E=1912&C=9UESpKFYfL7MRgeL3K3JR12kIb52JDfmmnbzQRDyRZT0T2MRzu7LYA&W=2; ANON=A=CAAF345D8AE8E86C46311BFBFFFFFFFF&E=196c&W=3; NAP=V=1.9&E=1912&C=vKKy-v96f8Lp72uHjYVgYOOfXwqJUr087Nucdnbtz0SSUlwmqkuYVg&W=3; MSNRPSShare=1; ASP.NET_SessionId=1ex3zo2jhtjci1xn3am2jghv; MSCOMRPSSecAuth=FACaBxRUzyIE6vaYt7Vsn1ezurwSQOtYJQNmAAAEgAAACApTj8KrO5hnWAfPph3U1Jws3kOpZ4JkeQYU3bdgdLkvfEnj8bHITekFw5h0DcRQ%2BHHhpLpW8Pq00E/r/AlX7lSFAmbOe7UaScio5SW36Tg/52otyze0QBpOVLPE7ScaHz0ENxtu9zzbs6TOkKfWUqXINtqjHxjL06kzYCiXxcKSXfEPjfrTmF5al62Gu5C7gAdaLj7sf/2FQ/mVwh/HPWZGHASRMWUWZlfrR4M5THRzdBrrDH0GtroAl8uh8vTQE2MuuLxiSCUDkE/%2BPY0vqXJCxtaQUCsaLTd/wMAbu/dZrkIRkQDIL7ecgmaKMunQmYddO6%2BCM%2B58myZSR8Wx/Bk91QpYsEzXlBj3qjIudLGwOae1CQconacM7BDadexuQhaMO3OsuqXbnqikAm4JhU9%2BYUaCXV3noyOQVGYcp7njLTX5SFRm%2Bc859gXeRpFl6Xh795AvKJtnomBJ8ysS%2BJlgk3hcFe/%2BqFQOf5dvN24Ut3grtazR4w2it4s84ieRIOmBrRrb/PwG65hS2%2B88ZKjV5ZvblD7Ujj7D6mu0RhPcDPjo2qAz/WW6ueX4UDkxnWcn8VAvtVNHcwpT8ofQ5tCw0KEFlbshZzrY1zVPCxoum0DyZYWPfXsdAlZ2TYx00rMIWKm%2B49/8nR7IrJwzR94oyYIHMC2DkdOKQrq3%2Bk5ASdXWpMwuqk60w0FzlmYvX88otLLCSSEkkop8z7PyXe7t7fPTgF3ZRKWYSvkuzrcE5BOVPZ2aZIPkplSM4Z34TOONcaxWzmUvhBQmIouAjK6iwvJvVB/K4iFJQZKfsDxItKpCDWqvvWOWXDbNZq6AQWTjioBmloya5Ldb3B9QRfvlxDlibJRRIlu/7T/iDtPts3JN35%2BCUEAffHn/2%2BGOoJ1nQFSg6zerebnXuo2nS7mFMBSjgO6poSOo5ICG/radB/hDg6JnVMxVse4tgF/OgYZURQFeW02r%2BARSNd1okA7uoljtQto9LXfz3zywI9KezRdwdjHwGPusrKh6rqdh/1Z7/aLrbGLYL4o%2B8b4yn947T1m7NdJfKO4Rta72A/ptusDDCQJIm7ljTT%2BRWWyJpmdOn6oo6U02puWxnVUi9L4izzScG/u7zk%2BOzEon8bg0bz8Rajk62MIVQMm3sQYUbaYMUvx%2BKCrZIx3C%2BH9SrVikErhqfMOv905d/3KCUj0k%2BJnoATx%2BFSTaa8OrtVex3btAY1WWdz2mFT0/cbCTx369NFfu9V8Qec9Ugm3Ashw4qJ%2B8JVbiqYSuzBEEewf%2Bl5gajK5DqFaf70T1xjZ%2B8GcH1ZY7mmljsVUmiX/SBPj29o3NAnMGc6DOiymEVVNZHaIHDfiZFpr9qav19WiXp0kbyod83smP4EzwmW5KF3%2B9RY%2BeLOIXazNZxlz8BwZgHJSxPE34T3cfr30sUaGdQyuy2R59USdNQ6qYxFUWcxOLPqtwQZxzxVOJdGmh57IXMre1Yduqlk1Egt4SmErSVpLT25wWYamJr%2BBdVbFnH5h4fjJYUXxkf8d5lN61Qv0y05dRaGwptB6saemByHgGqN39v0iXv70umwVDcRvTnfr4GNSLB6n11%2BFhory72lxIM265ZK8lSWLuIhgevK64Gbu3Ae1M6zrLoj%2B02eS8H2PJCq6PHNb6fwVD8lXHaj%2BNgT1YxVHSoXepEtwAi1dCyUo7VcSOljZx7x/nEwHFMLbp0Mb4YwHrecX6NdUPboB0d%2B2puWlJMTjtPFnwhvW/ctTPykK9Vmft8TEb8n8iAvUmiUWHnVUQne9OyMeNtMy/PgcUfeC23pCV%2B983OalFKlE3HA9RuppqHLqco5YLHycTaQ2bDujesapLjaTct1t5mCkSKynsZ5CYB3zfkUobSe/ssAQCdFOTTWvd3SztFuWoWYcVhz35zwa4/qbv/H3LOC81y64bP1/B2GZTvM1/6Dd2xx7t4RYP6GfD0ZwnhQPnfB7R14IiF3GuXhdxTZHdbswhhT0Sl4l8fgkWrqcxP0ySQaMy2lxad2D/ztfQpfxw9Zn%2B0msWBkNkKNpEndXTL%2BtA7qo3M5m1F%2ByKl/l2C7TgAIZq/amYtpplI96cs659F6n7MM%2Brc9Jkhk6dn6nH0IkqqF7U5RbXUgcv5GYlwaVNWXSboZZt7x6krdPPfQwtbU13uBxC/Xo05gEdB3tDHF0DZFyoXS8WS/xofDMuAWxKIQhkKvz/OSAKZCJnBz4EOWVB8JOYLDu5lANTeUjUDy6h6shruj82hXRKhTI9fxYvf4tGrwdIVs2fkyV3hh3Ssezw6xgSsE3Q6sQQnZg1kO%2BZFfqEGMdQVWbcfM%2BJzjGoi/5hbrUcOWu3CzTuaEUNW71kTiV3jA2A5i6s8r1/PCOHippWEtjgifPXW00zX895zo2N7dip8EUsO04WECyvRzFtk9zm%2Bd9luRdQuzLKL5D4acQcsccdRAA1WncnXmwhS5RPjDW2xwl8P9aEA7yFxQL4Nja5uVPej7CdLtucyT/CuogeFAdRoBTEHgroimAq3BQAM/JPasdy/uXFf65sC7QBonGTJD0%3D; MSPAuth=2mN*JzsPMGiIwXF1P8f6XDAfXOu18aRiTLYiej1NZ3qrapwm6kGjkGU3kEFslrsgHEYh*jbNknQmIpejHmOz71EBNstTMh2nBCeHgZsbg2CtTpXq2IwuLHtVcIrJwURsdnrWl7PrV9hn4$; MSPProf=2xFiPZvE!FHrrBR7B3hgDnRgzCrCLSLpDaaB0hIhvwk0fXopLSY*cfTgjg6Hpo6OijIWYByDLUR89sQXos6BMOT0lTqdWXk6y5BrjMaPObrDHe3zSgAxkrO0s6wfPqFMliwDEJ73sgVEqfg4EZb*mxmh8ZABMQszdUMONBy5pg8HylrVORkL5d9d17NIgn*4k!4yI1RGDRNqc34INZO4NsK03F126TngfD; market=US; display-culture=pt-BR; InsiderGroups=a78287f79f56ddc1-insider; MS0=3dd6961305984d0fabcd55261971d47c; MS-CV=Pfz24s47+keWb0I1.1.0"
        }
    }).then((response) => {
        return response.data.metadata.mscomct;
    })

    if (req.method === 'POST') {
        res.status(200).json({'Authorization': response})
    } else {
        response.setHeader('Allow', 'POST');
        response.status(405).end('Method not allowed')
    }
}